<Window x:Class="FlightAnalyzer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   	xmlns:map="clr-namespace:GMap.NET.WindowsPresentation;assembly=GMap.NET.WindowsPresentation"
    Title="Flight Analyzer" Width="800" Height="600"
    ResizeMode="CanResizeWithGrip" WindowState="Maximized"
    KeyDown="MainWindow_KeyDown" Loaded="Window_Loaded">
    <DockPanel>
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock Text="(c) 2009 balloonerds.com"/>
            </StatusBarItem>
        </StatusBar>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <ListBox Name="DropListBox" Grid.Column="0"
                     Margin="5,5,0,5" 
                     ItemsSource="{Binding}" DisplayMemberPath="Tag"
                     AllowDrop="True" Drop="DropListBox_Drop"
                     SelectionChanged="DropListBox_SelectionChanged">
                <ListBoxItem>Drop file(s) here</ListBoxItem>
            </ListBox>
            <Grid Grid.Column="1" 
                  Margin="5,0,5,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>
                <Expander Header="Details" Grid.Row="0" 
                          IsExpanded="True" Height="Auto">
                    <Grid DataContext="{Binding ElementName=DropListBox, Path=SelectedItem}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0" Grid.Column="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="2*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Row="0" Grid.Column="0"
                                       Margin="5">
                                Date:
                            </TextBlock>
                            <TextBlock Margin="5" Grid.Row="0" Grid.Column="1" 
                                       TextAlignment="Right" Background="LightGray" 
                                       Text="{Binding Path=Date,StringFormat='dd/MM/yyyy', Mode=OneWay}">
                            </TextBlock>
                        </Grid>

                        <Grid Grid.Row="0" Grid.Column="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="2*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBlock Margin="5" Grid.Row="0" Grid.Column="0">
                                Pilot:
                            </TextBlock>
                            <TextBlock Margin="5" Grid.Row="0" Grid.Column="1"
                                       TextAlignment="Right" Background="LightGray"
                                       Text="{Binding Path=PilotId, Mode=OneWay}">
                            </TextBlock>
                        </Grid>

                        <Grid Grid.Row="1" Grid.Column="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="2*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Row="0" Grid.Column="0"
                                       Margin="5" >
                                Launch:
                            </TextBlock>
                            <TextBlock Grid.Row="0" Grid.Column="1" 
                                       Margin="5" 
                                       TextAlignment="Right" Background="LightGray"
                                       Text="{Binding Path=LaunchPoint, Mode=OneWay}">
                            </TextBlock>
                        </Grid>

                        <Grid Grid.Row="1" Grid.Column="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="2*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Row="0" Grid.Column="0"
                                       Margin="5" >
                                Landing:
                            </TextBlock>
                            <TextBlock Grid.Row="0" Grid.Column="1" 
                                       Margin="5" 
                                       TextAlignment="Right" Background="LightGray"
                                       Text="{Binding Path=LandingPoint, Mode=OneWay}">
                            </TextBlock>
                        </Grid>

                        <Grid Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Grid.Column="0"
                                       Margin="5,5,5,0">
                                Markers:
                            </TextBlock>
                            <ListBox Grid.Row="1" Grid.Column="0"
                                     Margin="5" MinHeight="50" Height="Auto"
                                     Background="LightGray"
                                     ItemsSource="{Binding Path=Markers, Mode=OneWay}">
                            </ListBox>
                            <TextBlock Grid.Row="0" Grid.Column="1"
                                       Margin="5,5,5,0">
                                Goal declarations:
                            </TextBlock>
                            <ListBox Grid.Row="1" Grid.Column="1"
                                     Margin="5" MinHeight="50" Height="Auto"
                                     Background="LightGray"
                                     ItemsSource="{Binding Path=DeclaredGoals, Mode=OneWay}">
                            </ListBox>
                        </Grid>


                        <TextBlock Grid.Row="3"
                                   Margin="5,5,5,0" >
                            Notes:
                        </TextBlock>
                        <ListBox Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2"
                                 Margin="5" 
                                 MinHeight="50" Background="LightGray"
                                 ItemsSource="{Binding Path=Notes, Mode=OneWay}">
                        </ListBox>
                    </Grid>
                </Expander>

                <map:GMapControl x:Name="MainMap"
                                 BorderBrush="Gray" BorderThickness="0.5"
                                 Margin="5,0,5,5" Height="Auto" Grid.Row="1"/>

                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <RadioButton Name="radioLogger"
                                     Margin="5,0,5,0" GroupName="track" IsChecked="True"
                                     Checked="radio_Checked">
                            Logger
                        </RadioButton>
                        <RadioButton Name="radioClean"
                                     Margin="5,0,5,0" GroupName="track"
                                     Checked="radio_Checked">
                            Clean
                        </RadioButton>
                    </StackPanel>
                    <StackPanel Grid.Column="1">
                        <Slider Name="sliderTime" Grid.Column="1"
                            Margin="5" ValueChanged="slider_ValueChanged" SmallChange="1" LargeChange="10">
                        </Slider>
                    </StackPanel>
                    <StackPanel Grid.Column="2">
                        <TextBlock Name="textblockTime"
                                   Margin="5" VerticalAlignment="Center"
                                   FontSize="12" FontWeight="Bold">
                            00:00:00
                        </TextBlock>
                    </StackPanel>
                    <StackPanel Grid.Column="3">
                        <CheckBox Name="checkLock" 
                                  Margin="5" HorizontalAlignment="Center" 
                                  Checked="checkLock_Checked">
                            Lock
                        </CheckBox>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
