<Window x:Class="Scorer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dg="http://schemas.microsoft.com/wpf/2008/toolkit"
        xmlns:local="clr-namespace:Scorer"
        DataContext="{Binding Source={x:Static local:Database.Instance}}"
        Title="MainWindow" Height="600" Width="1024"
        Closing="Window_Closing">
    <DockPanel LastChildFill="True">
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Event">
                <MenuItem Header="Load" Click="menuLoadEvent_Click"/>
                <MenuItem Header="Save" Click="menuSaveEvent_Click"/>
            </MenuItem>
            <MenuItem Header="Competitions" Click="menuCompetitions_Click"/>
            <MenuItem Header="Pilots" Click="menuPilots_Click"/>
            <MenuItem Header="Tasks" Click="menuTasks_Click"/>
        </Menu>
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock Text="{Binding Path=Competitions.Count, StringFormat=Competitions: {0:0}}"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock Text="{Binding Path=Pilots.Count, StringFormat=Pilots: {0:0}}"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock Text="{Binding Path=Tasks.Count, StringFormat=Tasks: {0:0}}"/>
            </StatusBarItem>
        </StatusBar>
        <Grid DockPanel.Dock="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2"/>
                <ColumnDefinition Width="4*"/>
            </Grid.ColumnDefinitions>
            <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="0">
                <StackPanel Orientation="Vertical">
                    <Expander ExpandDirection="Down" Background="LightGray" IsExpanded="True">
                        <Expander.Header>
                            <TextBlock VerticalAlignment="Top" FontWeight="Bold" Margin="0,0,5,0">Competitions</TextBlock>
                        </Expander.Header>
                        <ListBox ItemsSource="{Binding Path=Competitions}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}">
                                        <TextBlock.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Tag="{Binding}" Header="Competition pilots" Click="menuCompetitionPilots_Click"/>
                                                <MenuItem Tag="{Binding}" Header="Competition tasks" Click="menuCompetitionTasks_Click"/>
                                                <Separator/>
                                                <MenuItem Tag="{Binding}" Header="All Task scores" Click="menuCompetitionTaskScores_Click"/>
                                                <MenuItem Tag="{Binding}" Header="General score" Click="menuCompetitionGeneralScore_Click"/>
                                            </ContextMenu>
                                        </TextBlock.ContextMenu>
                                    </TextBlock>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Expander>
                    <Expander ExpandDirection="Down" Background="LightGray">
                        <Expander.Header>
                            <TextBlock VerticalAlignment="Top" FontWeight="Bold" Margin="0,0,5,0">Pilots</TextBlock>
                        </Expander.Header>
                        <ListBox ItemsSource="{Binding Path=Pilots}"/>
                    </Expander>
                    <Expander ExpandDirection="Down" Background="LightGray" IsExpanded="True">
                        <Expander.Header>
                            <TextBlock VerticalAlignment="Top" FontWeight="Bold" Margin="0,0,5,0">Tasks</TextBlock>
                        </Expander.Header>
                        <ListBox ItemsSource="{Binding Path=Tasks}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}">
                                        <TextBlock.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Tag="{Binding}" Header="Results" Click="menuTaskResults_Click"/>
                                            </ContextMenu>
                                        </TextBlock.ContextMenu>
                                    </TextBlock>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
            <GridSplitter Background="LightGray" Grid.Column="1" Height="Auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
            <TabControl Name="ItemsTab" Grid.Column="2"/>
        </Grid>
    </DockPanel>
</Window>
